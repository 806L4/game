<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aviator Elite 806L4</title>
    <style>
        :root { --pink: #ff4b6e; --gold: #ffd700; --sky: #1a2a6c; }
        body { margin: 0; background: #000; overflow: hidden; font-family: sans-serif; touch-action: none; color: white; }
        canvas { display: block; background: linear-gradient(to bottom, #1a2a6c, #b21f1f); }
        
        .hud { position: absolute; top: 10px; left: 10px; z-index: 10; background: rgba(0,0,0,0.6); padding: 10px; border-radius: 10px; pointer-events: none; border: 1px solid var(--pink); }
        .overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(0,0,0,0.8); z-index: 100; }
        .menu-card { background: #16213e; padding: 25px; border-radius: 20px; text-align: center; border: 2px solid var(--pink); width: 80%; max-width: 350px; }
        
        .shop { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0; }
        .item { background: #1a1a2e; padding: 10px; border-radius: 10px; font-size: 12px; cursor: pointer; border: 1px solid transparent; }
        .item.active { border-color: var(--pink); background: #2d142c; }
        
        button { background: var(--pink); color: white; border: none; padding: 15px; border-radius: 50px; font-weight: bold; width: 100%; cursor: pointer; font-size: 18px; }
        .author { margin-top: 15px; font-size: 9px; color: rgba(255,255,255,0.4); }
    </style>
</head>
<body>

<div class="hud">
    üí∞ <span id="cHUD">0</span> | ‚≠ê <span id="sHUD">0</span> | ‚õΩ <progress id="fBar" value="100" max="100" style="width:70px"></progress>
</div>

<div id="menu" class="overlay">
    <div class="menu-card">
        <h2 style="color:var(--pink)">–ê–ù–ì–ê–† 806L4</h2>
        <p>–ë–∞–ª–∞–Ω—Å: <span id="totalC">0</span> üí∞</p>
        <div class="shop" id="shop"></div>
        <button id="startBtn">–ü–û–ï–•–ê–õ–ò! üöÄ</button>
        <div class="author">CREATED BY <b>806L4</b></div>
    </div>
</div>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

const shipModels = [
    { name: "–°–ø—É—Ç–Ω–∏–∫", speed: 6, guns: 1, price: 0, color: '#ff4b6e' },
    { name: "–†–∞–∫–µ—Ç–∞", speed: 9, guns: 1, price: 300, color: '#00d2ff' },
    { name: "–¢–∞–Ω–∫", speed: 5, guns: 1, price: 800, color: '#4caf50' },
    { name: "–î—Ä–æ–Ω", speed: 7, guns: 2, price: 1500, color: '#ffd700' },
    { name: "–ó–≤–µ–∑–¥–∞", speed: 11, guns: 3, price: 3000, color: '#9c27b0' }
];

let userData = JSON.parse(localStorage.getItem('av_806_v2')) || { coins: 0, unlocked: [true, false, false, false, false], current: 0 };
let score = 0, fuel = 100, active = false;
let player = { x: 0, y: 0, w: 40, h: 40 };
let enemies = [], bullets = [], items = [];

function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
window.addEventListener('resize', resize);
resize();

// –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–û–ï –£–ü–†–ê–í–õ–ï–ù–ò–ï (–ü–ö + –¢–ï–õ–ï–§–û–ù)
window.addEventListener('pointermove', (e) => {
    if(!active) return;
    player.x = e.clientX - player.w/2;
    player.y = e.clientY - player.h/2;
});

function updateUI() {
    document.getElementById('totalC').innerText = userData.coins;
    document.getElementById('cHUD').innerText = userData.coins;
    const s = document.getElementById('shop');
    s.innerHTML = '';
    shipModels.forEach((m, i) => {
        const div = document.createElement('div');
        div.className = `item ${userData.current === i ? 'active' : ''}`;
        div.innerHTML = `<b>${m.name}</b><br>${userData.unlocked[i] ? '–í–´–ë–†–ê–¢–¨' : m.price+'üí∞'}`;
        div.onclick = () => {
            if(userData.unlocked[i]) userData.current = i;
            else if(userData.coins >= m.price) { userData.coins -= m.price; userData.unlocked[i] = true; userData.current = i; }
            localStorage.setItem('av_806_v2', JSON.stringify(userData));
            updateUI();
        };
        s.appendChild(div);
    });
}

function drawPlane(x, y, color, isEnemy = false) {
    ctx.fillStyle = color;
    if(isEnemy) {
        ctx.fillRect(x + 15, y + 5, 10, 30);
        ctx.fillRect(x, y + 10, 40, 5);
    } else {
        ctx.fillRect(x + 15, y, 10, 40); // –∫–æ—Ä–ø—É—Å
        ctx.fillRect(x, y + 20, 40, 6);  // –∫—Ä—ã–ª—å—è
        ctx.fillStyle = "cyan"; // –æ–≥–æ–Ω—å –¥–≤–∏–≥–∞—Ç–µ–ª—è
        ctx.fillRect(x + 17, y + 38, 6, 5);
    }
}

function loop() {
    if(!active) return;
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // –ê–≤—Ç–æ—Å—Ç—Ä–µ–ª—å–±–∞
    if(Date.now() % 200 < 20) {
        bullets.push({x: player.x + player.w/2 - 2, y: player.y, w: 4, h: 12});
    }

    // –ò–≥—Ä–æ–∫
    drawPlane(player.x, player.y, shipModels[userData.current].color);

    // –í—Ä–∞–≥–∏
    if(Math.random() < 0.03) enemies.push({x: Math.random()*(canvas.width-40), y: -50, w: 40, h: 40});
    enemies.forEach((en, i) => {
        en.y += 4;
        drawPlane(en.x, en.y, "#333", true);
        if(en.y > canvas.height) enemies.splice(i, 1);
        if(intersect(player, en)) { active = false; document.getElementById('menu').style.display = 'flex'; updateUI(); }
        bullets.forEach((b, bi) => {
            if(intersect(b, en)) { enemies.splice(i, 1); bullets.splice(bi, 1); score += 10; userData.coins += 2; }
        });
    });

    // –ü—É–ª–∏
    bullets.forEach((b, i) => { b.y -= 10; ctx.fillStyle = "yellow"; ctx.fillRect(b.x, b.y, b.w, b.h); if(b.y < -20) bullets.splice(i, 1); });

    // –¢–æ–ø–ª–∏–≤–æ
    if(Math.random() < 0.01) items.push({x: Math.random()*(canvas.width-30), y: -50, w: 20, h: 20});
    items.forEach((it, i) => {
        it.y += 3;
        ctx.fillStyle = "orange"; ctx.beginPath(); ctx.arc(it.x+10, it.y+10, 10, 0, Math.PI*2); ctx.fill();
        if(intersect(player, it)) { fuel = Math.min(100, fuel + 20); items.splice(i, 1); }
    });

    fuel -= 0.08;
    document.getElementById('sHUD').innerText = score;
    document.getElementById('fBar').value = fuel;
    if(fuel <= 0) { active = false; document.getElementById('menu').style.display = 'flex'; updateUI(); }
    requestAnimationFrame(loop);
}

const intersect = (r1, r2) => !(r2.x > r1.x + r1.w || r2.x + r2.w < r1.x || r2.y > r1.y + r1.h || r2.y + r2.h < r1.y);

document.getElementById('startBtn').onclick = () => {
    active = true; score = 0; fuel = 100; enemies = []; bullets = []; items = [];
    document.getElementById('menu').style.display = 'none';
    loop();
};

updateUI();
</script>
</body>
</html>
