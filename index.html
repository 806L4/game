<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org"></script>
    <title>Aviator Elite 806L4</title>
    <style>
        :root { --pink: #ff4b6e; --gold: #ffd700; --sky: #4facfe; }
        body { margin: 0; background: #00f2fe; overflow: hidden; font-family: sans-serif; touch-action: none; color: white; }
        canvas { display: block; cursor: crosshair; }
        
        .hud { position: absolute; top: 15px; left: 15px; z-index: 10; background: rgba(255,255,255,0.2); padding: 12px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.4); pointer-events: none; backdrop-filter: blur(8px); color: #1a2a6c; font-weight: bold; }
        progress { width: 100px; height: 10px; accent-color: var(--pink); border-radius: 5px; }

        .overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(26, 42, 108, 0.8); z-index: 100; backdrop-filter: blur(5px); }
        .menu-card { background: white; padding: 30px; border-radius: 30px; text-align: center; border: 4px solid var(--pink); width: 85%; max-width: 400px; color: #1a2a6c; box-shadow: 0 15px 50px rgba(0,0,0,0.3); }
        
        .shop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 20px 0; max-height: 250px; overflow-y: auto; padding: 5px; }
        .shop-item { background: #f0f4f8; padding: 12px; border-radius: 18px; font-size: 12px; cursor: pointer; border: 2px solid transparent; transition: 0.3s; color: #1a2a6c; }
        .shop-item.active { border-color: var(--pink); background: #ffeef2; box-shadow: 0 5px 15px rgba(255, 75, 110, 0.2); }
        
        button { background: var(--pink); color: white; border: none; padding: 16px; border-radius: 50px; font-weight: bold; cursor: pointer; width: 100%; font-size: 18px; text-transform: uppercase; box-shadow: 0 5px 15px rgba(255, 75, 110, 0.4); }
        .author { margin-top: 20px; font-size: 9px; color: #aaa; letter-spacing: 2px; }
    </style>
</head>
<body>

<div class="hud">
    üí∞ <span id="coinsHUD">0</span> | ‚≠ê <span id="scoreHUD">0</span><br>
    ‚õΩ <progress id="fuelBar" value="100" max="100"></progress>
</div>

<div id="mainMenu" class="overlay">
    <div class="menu-card">
        <h2 style="margin:0; color:var(--pink);">–ê–ù–ì–ê–† 806L4</h2>
        <p>–ë–∞–ª–∞–Ω—Å: <span id="totalCoins" style="font-weight:bold">0</span> üí∞</p>
        <div class="shop-grid" id="shopGrid"></div>
        <button id="startBtn">–í–ó–õ–ï–¢ üöÄ</button>
        <div class="author">MADE BY <b>806L4</b> | SUPPORT BY AI</div>
    </div>
</div>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

const shipModels = [
    { name: "–°–ø—É—Ç–Ω–∏–∫", speed: 6, hp: 1, guns: 1, price: 0, color: '#ff4b6e' },
    { name: "–†–∞–∫–µ—Ç–∞", speed: 9, hp: 1, guns: 1, price: 300, color: '#00d2ff' },
    { name: "–¢–∞–Ω–∫", speed: 4, hp: 4, guns: 1, price: 800, color: '#4caf50' },
    { name: "–î—Ä–æ–Ω", speed: 7, hp: 2, guns: 2, price: 1500, color: '#ffd700' },
    { name: "–ó–≤–µ–∑–¥–∞", speed: 11, hp: 2, guns: 3, price: 3000, color: '#9c27b0' }
];

let userData = JSON.parse(localStorage.getItem('aviator_day_v1')) || {
    coins: 0, unlockedShips: [true, false, false, false, false], currentShipIndex: 0
};

let score = 0, fuel = 100, gameActive = false;
let player = { x: 0, y: 0, w: 50, h: 50 };
let enemies = [], bullets = [], clouds = [];

// –°–æ–∑–¥–∞–µ–º –æ–±–ª–∞–∫–∞
for(let i=0; i<8; i++) clouds.push({x: Math.random()*window.innerWidth, y: Math.random()*window.innerHeight, s: 0.5+Math.random()});

function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
window.addEventListener('resize', resize);
resize();

function drawShip(x, y, color, isEnemy = false) {
    ctx.save();
    ctx.translate(x + 25, y + 25);
    if(isEnemy) ctx.rotate(Math.PI);

    // –¢–µ–Ω—å
    ctx.fillStyle = "rgba(0,0,0,0.1)";
    ctx.beginPath(); ctx.ellipse(5, 5, 20, 10, 0, 0, Math.PI*2); ctx.fill();

    // –ö–æ—Ä–ø—É—Å
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.moveTo(0, -25); // –ù–æ—Å
    ctx.bezierCurveTo(15, -10, 15, 15, 10, 25); // –ü—Ä–∞–≤—ã–π –±–æ–∫
    ctx.lineTo(-10, 25); // –•–≤–æ—Å—Ç
    ctx.bezierCurveTo(-15, 15, -15, -10, 0, -25); // –õ–µ–≤—ã–π –±–æ–∫
    ctx.fill();

    // –ö—Ä—ã–ª—å—è
    ctx.fillStyle = color;
    ctx.fillRect(-25, 0, 50, 8);
    ctx.fillStyle = "rgba(0,0,0,0.2)";
    ctx.fillRect(-25, 6, 50, 2);

    // –ö–∞–±–∏–Ω–∞
    ctx.fillStyle = isEnemy ? "#ff4444" : "#aaddff";
    ctx.beginPath();
    ctx.ellipse(0, -10, 6, 12, 0, 0, Math.PI*2);
    ctx.fill();

    ctx.restore();
}

function updateUI() {
    document.getElementById('totalCoins').innerText = userData.coins;
    document.getElementById('coinsHUD').innerText = userData.coins;
    const grid = document.getElementById('shopGrid');
    grid.innerHTML = '';
    shipModels.forEach((s, i) => {
        const active = userData.currentShipIndex === i;
        grid.innerHTML += `<div class="shop-item ${active?'active':''}" onclick="selectShip(${i})">
            <b style="color:${s.color}">${s.name}</b><br>
            ${userData.unlockedShips[i] ? '–í–´–ë–†–ê–¢–¨' : s.price+' üí∞'}
        </div>`;
    });
}

window.selectShip = (i) => {
    if(userData.unlockedShips[i]) userData.currentShipIndex = i;
    else if(userData.coins >= shipModels[i].price) {
        userData.coins -= shipModels[i].price; userData.unlockedShips[i] = true; userData.currentShipIndex = i;
    }
    localStorage.setItem('aviator_day_v1', JSON.stringify(userData));
    updateUI();
};

function loop() {
    if(!gameActive) return;
    
    // –°–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω (–ù–µ–±–æ)
    let sky = ctx.createLinearGradient(0, 0, 0, canvas.height);
    sky.addColorStop(0, '#4facfe'); sky.addColorStop(1, '#00f2fe');
    ctx.fillStyle = sky; ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // –û–±–ª–∞–∫–∞
    ctx.fillStyle = "rgba(255,255,255,0.5)";
    clouds.forEach(c => {
        c.y += c.s; if(c.y > canvas.height) { c.y = -50; c.x = Math.random()*canvas.width; }
        ctx.beginPath(); ctx.arc(c.x, c.y, 20, 0, Math.PI*2); ctx.arc(c.x+15, c.y-10, 25, 0, Math.PI*2); ctx.arc(c.x+30, c.y, 20, 0, Math.PI*2); ctx.fill();
    });

    // –ò–≥—Ä–æ–∫
    drawShip(player.x, player.y, shipModels[userData.currentShipIndex].color);

    // –ê–≤—Ç–æ—Å—Ç—Ä–µ–ª—å–±–∞
    if(Date.now() % 180 < 25) bullets.push({x: player.x+23, y: player.y, w:4, h:12});

    // –í—Ä–∞–≥–∏
    if(Math.random() < 0.03) enemies.push({x: Math.random()*(canvas.width-50), y: -60, w: 50, h: 50});
    enemies.forEach((en, i) => {
        en.y += (3.5 + score/1200);
        drawShip(en.x, en.y, "#444", true); // –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π –≤—Ä–∞–≥
        if(intersect(player, en)) { gameActive = false; document.getElementById('mainMenu').style.display = 'flex'; updateUI(); }
        bullets.forEach((b, bi) => {
            if(intersect(b, en)) { enemies.splice(i, 1); bullets.splice(bi, 1); score += 10; userData.coins += 2; }
        });
        if(en.y > canvas.height) enemies.splice(i, 1);
    });

    bullets.forEach((b, i) => { b.y -= 10; ctx.fillStyle = "orange"; ctx.fillRect(b.x, b.y, b.w, b.h); if(b.y < -20) bullets.splice(i, 1); });

    fuel -= 0.07;
    document.getElementById('scoreHUD').innerText = score;
    document.getElementById('fuelBar').value = fuel;
    if(fuel <= 0) { gameActive = false; document.getElementById('mainMenu').style.display = 'flex'; updateUI(); }
    requestAnimationFrame(loop);
}

const intersect = (r1, r2) => !(r2.x > r1.x + r1.w || r2.x + r2.w < r1.x || r2.y > r1.y + r1.h || r2.y + r2.h < r1.y);

// –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–û–ï –£–ü–†–ê–í–õ–ï–ù–ò–ï (–£–ª—É—á—à–µ–Ω–æ –¥–ª—è –ü–ö)
const move = (e) => {
    let x = e.clientX || (e.touches && e.touches[0].clientX);
    let y = e.clientY || (e.touches && e.touches[0].clientY);
    if(gameActive) { player.x = x - 25; player.y = y - 25; }
};
window.addEventListener('pointermove', move);

document.getElementById('startBtn').onclick = () => {
    gameActive = true; score = 0; fuel = 100; enemies = []; bullets = [];
    document.getElementById('mainMenu').style.display = 'none';
    loop();
};

updateUI();
</script>
</body>
</html>
